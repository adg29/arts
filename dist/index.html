<!doctype html>
<html>
  <head>
    <title>Getting Started</title>
  </head>
  <body>
    <script src="./main.js"></script>
    <script type='text/javascript'>

var abi = [{"constant":false,"inputs":[{"name":"index","type":"uint256"}],"name":"get_art_owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"get_arts_count","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"index","type":"uint256"}],"name":"get_art_description","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"index","type":"uint256"}],"name":"get_art_title","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"arts_count","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"title","type":"string"},{"name":"description","type":"string"}],"name":"create_art","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]

var w3 = new myweb3(web3.currentProvider)
//var contract_address = "0xeE9510e86eCa6f11f261ea13837034fc3D161843";
var contract_address = "0xa8ac6b45f8eb4ce563292e1a88372aa0e75b81ff";

var contract =  new w3.eth.Contract(abi, contract_address);
async function app(){
  var messages_count = await contract.methods.get_arts_count().call();
  var arts = []
  for(var index = 0; index < messages_count; index++){
    var title = await contract.methods.get_art_title(index).call()
    var description = await contract.methods.get_art_title(index).call()
    var owner = await  contract.methods.get_art_owner(index).call()
    arts.push({title:title,description:description,owner:owner});
  }
  console.log(arts);
}
app()

    </script>

  </body>
</html>

